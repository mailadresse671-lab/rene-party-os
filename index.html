<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>REN√â OS v11 - PERSONAL EDITION</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;700;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/gun/gun.js"></script>
    <style>
        :root {
            --cyan: #00f2ea; --pink: #ff0050; --purple: #b026ff; --green: #39ff14;
            --yellow: #ffee00; --dark: #020617; --term-green: #0f0; --term-red: #f00;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; }
        body { background-color: #000; font-family: 'Fredoka', sans-serif; color: white; height: 100vh; overflow: hidden; display: flex; flex-direction: column; }
        
        .hidden { display: none !important; }
        .full-screen { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 10; overflow: hidden; display: flex; flex-direction: column; }

        /* SPECTACULAR INTRO */
        #view-intro { background: #000; z-index: 2000; font-family: 'Share Tech Mono', monospace; }
        #intro-vid-bg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; opacity: 0.5; filter: hue-rotate(180deg) contrast(1.2); z-index: 1; transition: 0.2s; }
        .shake { animation: shakeVid 0.2s infinite; }
        @keyframes shakeVid { 0% { transform: translate(2px, 2px); } 50% { transform: translate(-3px, -2px); } 100% { transform: translate(2px, 2px); } }
        
        #terminal-console { position: absolute; top: 10%; bottom: 20%; left: 10%; right: 10%; color: var(--term-green); font-size: 1.2rem; z-index: 2; display: flex; flex-direction: column; justify-content: flex-end; text-align: center; }
        .log-line { margin-bottom: 8px; background: rgba(0,0,0,0.6); padding: 5px; border-radius: 5px; animation: fadeIn 0.2s forwards; }
        #big-overlay { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 100%; text-align: center; font-size: 3.5rem; font-weight: 900; z-index: 5; opacity: 0; text-shadow: 0 0 20px var(--cyan); }
        
        /* ASK BOX (In Intro) */
        #intro-ask-box { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 90%; max-width: 400px; background: rgba(10, 15, 31, 0.95); border: 2px solid var(--cyan); padding: 25px; border-radius: 15px; z-index: 200; display: none; text-align: center; }
        
        #start-btn { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 100; padding: 25px 50px; font-size: 2rem; background: var(--pink); border: none; border-radius: 15px; color: white; cursor: pointer; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255,0,80,0.7); } 70% { transform: scale(1.05); box-shadow: 0 0 0 20px rgba(255,0,80,0); } 100% { transform: scale(1); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* DASHBOARD & ROOMS */
        .app-header { height: 60px; display: flex; align-items: center; justify-content: space-between; padding: 0 15px; background: #0a0f1f; border-bottom: 1px solid var(--cyan); }
        .room-card { background: rgba(255,255,255,0.05); border: 1px solid var(--cyan); border-radius: 15px; padding: 15px; text-align: center; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 130px; }
        .input-field { width: 100%; padding: 12px; margin: 10px 0; background: #000; border: 1px solid var(--cyan); color: white; border-radius: 8px; text-align: center; font-family: 'Fredoka'; }
        .btn { background: var(--cyan); border: none; border-radius: 10px; padding: 12px 25px; font-weight: bold; color: #000; cursor: pointer; }
    </style>
</head>
<body>

    <audio id="intro-music" src="intro-sound.mp3"></audio>

    <div id="view-intro" class="full-screen">
        <video id="intro-vid-bg" muted playsinline></video>
        <div id="terminal-console"></div>
        <div id="big-overlay"></div>
        
        <div id="intro-ask-box">
            <h3 id="ask-title" style="color:var(--yellow); margin-bottom:15px;">SECURITY CHECK</h3>
            <p id="ask-question" style="margin-bottom:20px; font-size:1.2rem;"></p>
            <input type="text" id="ask-input" class="input-field" placeholder="Deine Antwort...">
            <button class="btn" onclick="intro.checkAnswer()">BEST√ÑTIGEN</button>
        </div>

        <button id="start-btn" onclick="intro.start()">SYSTEM INITIALISIEREN ‚ö°</button>
    </div>

    <div id="view-login" class="full-screen hidden">
        <div style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100%; background:radial-gradient(circle, #1a1a3e 0%, #0a0f1f 100%);">
            <div style="background:rgba(15, 23, 42, 0.9); border: 2px solid var(--cyan); border-radius: 20px; padding: 30px; text-align: center; width: 85%; max-width: 350px;">
                <h1 style="color:var(--cyan); font-size:2.5rem; margin-bottom:10px;">REN√â OS v11</h1>
                <p style="opacity:0.7">Zugriff gew√§hrt.</p>
                <input type="text" id="username" class="input-field" placeholder="Dein Name..." maxlength="10">
                <button class="btn" style="width:100%" onclick="app.login()">BETRETEN</button>
            </div>
        </div>
    </div>

    <div id="view-dash" class="full-screen hidden">
        <div class="app-header"><div></div><div style="font-family:'Bangers'; font-size:1.5rem; color:var(--pink)">DASHBOARD</div><div></div></div>
        <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px; padding:20px;">
            <div class="room-card" onclick="app.nav('chat')"><span>üí¨</span><p>Chat</p></div>
            <div class="room-card" onclick="app.nav('snake')"><span>üêç</span><p>Snake</p></div>
            <div class="room-card" onclick="app.nav('tod')"><span>üé≤</span><p>Party</p></div>
            <div class="room-card" onclick="app.nav('art')"><span>üé®</span><p>Picasso</p></div>
            <div class="room-card" onclick="app.nav('dj')"><span>üéπ</span><p>Beats</p></div>
        </div>
    </div>

    <div id="view-chat" class="full-screen hidden">
        <div class="app-header"><button class="back-btn" onclick="app.nav('dash')">‚¨ÖÔ∏è</button><div>PARTY CHAT</div><div></div></div>
        <div id="chat-list" style="flex:1; overflow-y:auto; padding:15px; display:flex; flex-direction:column; gap:10px;"></div>
        <div style="padding:10px; background:#111; display:flex; gap:5px;"><input id="chat-in" class="input-field" style="margin:0; flex:1;"><button class="btn" onclick="app.chatSend()">‚û§</button></div>
    </div>

    <script>
        const gun = Gun(['https://gun-manhattan.herokuapp.com/gun']);
        const db = gun.get('rene-party-v11-final');
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        let aCtx;

        const intro = {
            vids: ['glitch1.mp4', 'glitch2.mp4', 'glitch3.mp4'],
            questions: [
                { q: "Von welchem Balkon hat man die beste Aussicht?", a: ["eltern", "deinem", "wohnzimmer", "k√ºche", "haus"] },
                { q: "Welches Tier ist auf dem Bild mit Dir und DoN?", a: ["hund", "katze", "pferd", "esel", "l√∂we"] }
            ],
            currentQIdx: 0,
            
            start: () => {
                document.getElementById('start-btn').style.display = 'none';
                aCtx = new AudioContext();
                const aud = document.getElementById('intro-music'); aud.play();
                const vid = document.getElementById('intro-vid-bg'); let i=0;
                const pV = () => { vid.src = intro.vids[i]; vid.play(); i=(i+1)%intro.vids.length; };
                vid.onended = pV; pV(); intro.seq();
            },
            
            glitch: (dur) => {
                const v = document.getElementById('intro-vid-bg');
                v.style.filter = "invert(1) hue-rotate(90deg) contrast(2)";
                v.classList.add('shake');
                setTimeout(() => { v.style.filter = "hue-rotate(180deg) contrast(1.2)"; v.classList.remove('shake'); }, dur);
            },
            
            log: (t, type) => {
                const c = document.getElementById('terminal-console');
                const d = document.createElement('div'); d.className = 'log-line'; 
                if(type==='err') d.style.color = 'var(--term-red)';
                d.innerText = "> " + t; c.appendChild(d); c.scrollTop = c.scrollHeight;
            },

            seq: async () => {
                const sleep = ms => new Promise(r => setTimeout(r, ms));
                intro.log("INITIALIZING DO-N OVERRIDE..."); await sleep(1500);
                intro.glitch(200);
                intro.log("SCANNING FOR REN√â OS..."); await sleep(1000);
                intro.log("TARGET ACQUIRED: REN√â (29)", "success"); await sleep(1000);
                
                intro.glitch(400);
                intro.log("ENCRYPTED DATA FOUND. SECURITY CHECK REQUIRED...", "err"); await sleep(2000);
                
                // Show Question 1
                intro.showQuestion(0);
            },

            showQuestion: (idx) => {
                intro.currentQIdx = idx;
                const box = document.getElementById('intro-ask-box');
                document.getElementById('ask-question').innerText = intro.questions[idx].q;
                box.style.display = 'block';
                document.getElementById('ask-input').focus();
            },

            checkAnswer: async () => {
                const input = document.getElementById('ask-input').value.toLowerCase();
                const correctAnswers = intro.questions[intro.currentQIdx].a;
                const isCorrect = correctAnswers.some(a => input.includes(a));

                if (isCorrect) {
                    document.getElementById('intro-ask-box').style.display = 'none';
                    intro.glitch(500);
                    intro.log("ACCESS GRANTED: " + input.toUpperCase(), "success");
                    
                    if (intro.currentQIdx < intro.questions.length - 1) {
                        setTimeout(() => intro.showQuestion(intro.currentQIdx + 1), 1000);
                    } else {
                        // All questions done
                        intro.log("SYSTEM HIJACKED SUCCESSFULLY!", "success");
                        const o = document.getElementById('big-overlay');
                        o.innerText = "HAPPY BIRTHDAY REN√â!";
                        o.style.opacity = 1;
                        intro.glitch(1000);
                        setTimeout(() => {
                            document.getElementById('view-intro').classList.add('hidden');
                            document.getElementById('view-login').classList.remove('hidden');
                        }, 4000);
                    }
                } else {
                    intro.glitch(200);
                    intro.log("ACCESS DENIED: WRONG DATA", "err");
                    document.getElementById('ask-input').value = "";
                }
            }
        };

        const app = {
            user: '',
            login: () => {
                const n = document.getElementById('username').value; if(!n) return;
                app.user = n; document.getElementById('display-name').innerText = n;
                app.nav('dash'); app.chatListen();
            },
            nav: (v) => { document.querySelectorAll('.full-screen').forEach(e=>e.classList.add('hidden')); document.getElementById('view-'+v).classList.remove('hidden'); },
            chatSend: () => { const i = document.getElementById('chat-in'); db.get('chat').set({u:app.user, t:i.value}); i.value=''; },
            chatListen: () => { db.get('chat').map().once(data => { if(!data.t) return; const d = document.createElement('div'); d.innerText=data.u+": "+data.t; d.style.padding="5px"; document.getElementById('chat-list').appendChild(d); }); }
        };
    </script>
</body>
</html>
