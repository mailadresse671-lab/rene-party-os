<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>RENÉ OS v13 - CINEMATIC</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;700;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        :root {
            --cyan: #00f2ea; --pink: #ff0050; --term-green: #0f0; --term-red: #f00;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { background-color: #000; font-family: 'Fredoka', sans-serif; color: white; height: 100vh; overflow: hidden; }
        
        .hidden { display: none !important; }
        .full-screen { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 10; display: flex; flex-direction: column; }

        /* INTRO STYLES */
        #view-intro { background: #000; z-index: 2000; font-family: 'Share Tech Mono', monospace; }
        #intro-vid-bg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; opacity: 0.5; z-index: 1; filter: contrast(1.2); }
        
        #terminal-console { 
            position: absolute; bottom: 10%; left: 5%; right: 5%; 
            height: 40%; color: var(--term-green); font-size: 1rem; 
            z-index: 2; display: flex; flex-direction: column; justify-content: flex-end;
            text-shadow: 0 0 5px #0f0; overflow: hidden;
        }
        .log-line { margin-bottom: 5px; animation: fadeIn 0.3s forwards; }

        #big-overlay { 
            position: absolute; top: 40%; left: 50%; transform: translate(-50%, -50%); 
            width: 100%; text-align: center; font-size: 3rem; font-weight: 900; 
            z-index: 5; opacity: 0; transition: 0.5s; text-shadow: 0 0 20px var(--cyan);
        }

        #start-btn { 
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); 
            z-index: 100; padding: 20px 40px; font-size: 1.5rem; background: var(--pink); 
            border: none; border-radius: 50px; color: white; font-weight: bold;
        }

        #skip-btn {
            position: absolute; top: 20px; right: 20px; z-index: 2001;
            background: rgba(255,255,255,0.1); border: 1px solid white; color: white;
            padding: 8px 15px; border-radius: 20px; font-size: 0.8rem; display: none;
        }

        /* DASHBOARD */
        #view-dash { background: #020617; padding: 20px; align-items: center; justify-content: center; }
        .dash-card { 
            background: rgba(255,255,255,0.05); border: 1px solid var(--cyan); 
            width: 80%; padding: 20px; border-radius: 20px; text-align: center; margin-bottom: 20px;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <audio id="intro-music" src="intro-sound.mp3"></audio>

    <div id="view-intro" class="full-screen">
        <video id="intro-vid-bg" muted playsinline></video>
        <div id="terminal-console"></div>
        <div id="big-overlay"></div>
        <button id="skip-btn" onclick="intro.finish()">SKIP ⏩</button>
        <button id="start-btn" onclick="intro.start()">START EXPERIENCE ⚡</button>
    </div>

    <div id="view-app" class="full-screen hidden">
        <div id="view-dash" class="full-screen">
            <h1 style="color:var(--pink); margin-bottom:30px;">RENÉ OS v13</h1>
            <div class="dash-card">
                <h2>WILLKOMMEN</h2>
                <p>System erfolgreich gehackt.</p>
                <p style="margin-top:10px; color:var(--cyan)">Viel Spaß auf deiner Party!</p>
            </div>
            <button onclick="location.reload()" style="background:none; border:1px solid #333; color:#333; padding:5px; margin-top:20px;">Intro nochmal schauen</button>
        </div>
    </div>

    <script>
        const intro = {
            vids: ['glitch1.mp4', 'glitch2.mp4', 'glitch3.mp4'],
            isFirstTime: localStorage.getItem('introSeen') === null,

            start: () => {
                document.getElementById('start-btn').classList.add('hidden');
                
                // Audio & Video starten
                const aud = document.getElementById('intro-music');
                aud.play();
                
                const vid = document.getElementById('intro-vid-bg');
                let i = 0;
                const playNextVid = () => {
                    vid.src = intro.vids[i];
                    vid.play();
                    i = (i + 1) % intro.vids.length;
                };
                vid.onended = playNextVid;
                playNextVid();

                // Skip Button nur zeigen, wenn nicht das erste Mal
                if (!intro.isFirstTime) {
                    document.getElementById('skip-btn').style.display = 'block';
                }

                intro.runSequence();
            },

            log: (t, delay) => {
                return new Promise(resolve => {
                    setTimeout(() => {
                        const c = document.getElementById('terminal-console');
                        const d = document.createElement('div');
                        d.className = 'log-line';
                        d.innerText = "> " + t;
                        c.appendChild(d);
                        c.scrollTop = c.scrollHeight;
                        resolve();
                    }, delay);
                });
            },

            showBig: (t, duration) => {
                const o = document.getElementById('big-overlay');
                o.innerText = t;
                o.style.opacity = 1;
                return new Promise(r => setTimeout(() => { o.style.opacity = 0; r(); }, duration));
            },

            runSequence: async () => {
                await intro.log("BOOTING DO-N OVERRIDE...", 500);
                await intro.log("BYPASSING SECURITY...", 1000);
                await intro.showBig("HACKING SYSTEM", 2000);
                
                await intro.log("TARGET: RENÉ", 500);
                await intro.log("LOCATION: BIRTHDAY PARTY", 500);
                await intro.log("STATUS: OPTIMAL", 1000);
                
                await intro.showBig("ACCESS GRANTED", 2000);
                
                await intro.log("LOADING PERSONAL DATA...", 800);
                await intro.log("BALKON-RONNY DETECTED", 1200);
                await intro.log("HUND & KATZE PROTOCOL ACTIVE", 1000);
                
                await intro.showBig("HAPPY BIRTHDAY!", 3000);
                
                await intro.log("CLEANING UP TRACES...", 1000);
                await intro.log("SYSTEM READY.", 1000);

                // Wenn das Lied vorbei ist (oder kurz davor)
                const aud = document.getElementById('intro-music');
                aud.onended = () => {
                    intro.finish();
                };
                
                // Falls das Lied sehr lang ist, beenden wir nach dem Log-Ablauf nach kurzem Puffer
                setTimeout(() => {
                    if (intro.isFirstTime) {
                        // Beim ersten Mal warten wir wirklich aufs Audio-Ende
                    } else {
                        intro.finish();
                    }
                }, 15000); // Sicherheits-Timer falls Audio klemmt
            },

            finish: () => {
                localStorage.setItem('introSeen', 'true');
                document.getElementById('view-intro').classList.add('hidden');
                document.getElementById('view-app').classList.remove('hidden');
                document.getElementById('intro-music').pause();
            }
        };
    </script>
</body>
</html>
