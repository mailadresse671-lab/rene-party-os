<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>REN√â OS v9 - CINEMATIC</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;700;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/gun/gun.js"></script>
    <style>
        :root {
            --cyan: #00f2ea;
            --pink: #ff0050;
            --purple: #b026ff;
            --green: #39ff14;
            --yellow: #ffee00;
            --dark: #0a0f1f;
            --term-green: #0f0;
            --term-red: #ff3333;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; }
        
        body {
            background-color: #000;
            font-family: 'Fredoka', sans-serif;
            color: white;
            height: 100vh;
            overflow: hidden;
            display: flex; flex-direction: column;
        }

        .hidden { display: none !important; }
        .full-screen { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 10; overflow: hidden; display: flex; flex-direction: column; }
        .scrollable { overflow-y: auto; -webkit-overflow-scrolling: touch; }

        /* --- INTRO STYLES --- */
        #view-intro { background: #000; z-index: 2000; font-family: 'Share Tech Mono', monospace; }
        .scanlines { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0) 50%, rgba(0,0,0,0.2) 50%, rgba(0,0,0,0.2)); background-size: 100% 4px; pointer-events: none; z-index: 2005; opacity: 0.6; }
        #intro-vid-bg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; opacity: 0.3; filter: hue-rotate(180deg) contrast(1.2); z-index: 1; }
        #terminal-console { position: absolute; bottom: 100px; left: 20px; right: 20px; color: var(--term-green); font-size: 1.1rem; text-shadow: 0 0 5px var(--term-green); z-index: 2; display: flex; flex-direction: column; justify-content: flex-end; min-height: 50%; }
        .log-line { margin-bottom: 5px; opacity: 0; animation: typeIn 0.1s forwards; }
        .log-error { color: var(--term-red); text-shadow: 0 0 5px red; }
        .log-success { color: var(--cyan); }
        @keyframes typeIn { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }

        #big-overlay { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 100%; text-align: center; font-size: 3rem; font-weight: 900; color: white; z-index: 5; text-shadow: 0 0 20px white; opacity: 0; pointer-events: none; }
        .glitch-anim { animation: glitchSkew 0.3s infinite; color: var(--term-red); }
        @keyframes glitchSkew { 0% { transform: translate(-51%, -50%) skew(0deg); } 20% { transform: translate(-50%, -51%) skew(-10deg); } 100% { transform: translate(-50%, -50%) skew(0deg); } }

        #start-btn { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 100; padding: 20px 40px; font-size: 2rem; background: var(--pink); color: white; border: none; border-radius: 10px; cursor: pointer; animation: pulse 1.5s infinite; }
        #skip-btn { position: absolute; top: 20px; right: 20px; z-index: 100; background: rgba(0,0,0,0.5); border: 1px solid white; color: white; padding: 8px 15px; border-radius: 20px; cursor: pointer; display: none; }

        /* --- APP STYLES --- */
        #view-login { background: radial-gradient(circle, #1a1a3e 0%, #0a0f1f 100%); z-index: 100; align-items: center; justify-content: center; }
        .login-box { background: rgba(15, 23, 42, 0.95); border: 3px solid var(--cyan); border-radius: 20px; padding: 40px; text-align: center; width: 90%; max-width: 400px; }
        .input-field { width: 100%; padding: 15px; margin: 20px 0; background: rgba(0, 0, 0, 0.5); border: 2px solid var(--cyan); border-radius: 10px; color: white; text-align: center; font-size: 1.2rem; }
        .btn-main { width: 100%; padding: 15px; background: linear-gradient(135deg, var(--cyan), var(--green)); border: none; border-radius: 10px; font-weight: 900; font-size: 1.4rem; cursor: pointer; }

        .rooms-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; width: 100%; max-width: 600px; padding: 20px; }
        .room-card { background: rgba(255, 255, 255, 0.05); border: 2px solid var(--cyan); border-radius: 15px; padding: 20px; text-align: center; min-height: 140px; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .room-emoji { font-size: 3rem; }

        .room-header { display: flex; align-items: center; justify-content: space-between; padding: 15px; background: rgba(0,0,0,0.8); border-bottom: 2px solid var(--cyan); }
        .back-btn { background: none; border: none; font-size: 1.8rem; color: white; }
        .room-content { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; align-items: center; }
        .btn { background: var(--cyan); border: none; border-radius: 8px; padding: 12px 20px; font-weight: bold; margin: 5px; }

        .pad { aspect-ratio: 1; background: #222; border: 2px solid var(--cyan); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 2rem; }
        .pad:active { background: var(--cyan); color: black; }
        .dancefloor-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; width: 100%; max-width: 400px; }
        .bottle { font-size: 8rem; margin: 40px 0; transition: transform 3s ease-out; }

        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
    </style>
</head>
<body>

    <audio id="intro-music" src="intro-sound.mp3" preload="auto"></audio>

    <div id="view-intro" class="full-screen">
        <div class="scanlines"></div>
        <video id="intro-vid-bg" muted playsinline></video>
        <div id="terminal-console"></div>
        <div id="big-overlay"></div>
        <button id="start-btn" onclick="intro.start()">START THE SHOW üöÄ</button>
        <button id="skip-btn" onclick="intro.skip()">SKIP ‚è©</button>
    </div>

    <div id="view-login" class="full-screen hidden">
        <div class="login-box">
            <h1>üéâ PARTY üéâ</h1>
            <p style="color: var(--green); margin-bottom: 20px;">Die offizielle App f√ºr Ren√©</p>
            <input type="text" id="username" class="input-field" placeholder="Dein Name..." maxlength="12">
            <button class="btn-main" onclick="app.login()">LOS GEHT'S üöÄ</button>
        </div>
    </div>

    <div id="view-dash" class="full-screen hidden scrollable">
        <h1 style="text-align:center; margin-top:20px; color:var(--pink);">PARTY ZENTRALE</h1>
        <div class="rooms-grid">
            <div class="room-card" onclick="app.nav('karaoke')"><div class="room-emoji">üé§</div><div>KARAOKE</div></div>
            <div class="room-card" onclick="app.nav('photobooth')"><div class="room-emoji">üì∏</div><div>FOTO BOX</div></div>
            <div class="room-card" onclick="app.nav('trivia')"><div class="room-emoji">üß†</div><div>QUIZ</div></div>
            <div class="room-card" onclick="app.nav('bottle')"><div class="room-emoji">üçæ</div><div>FLASCHE</div></div>
            <div class="room-card" onclick="app.nav('dancefloor')"><div class="room-emoji">üíÉ</div><div>DANCEFLOOR</div></div>
            <div class="room-card" onclick="app.nav('leaderboard')"><div class="room-emoji">üèÜ</div><div>RANGLISTE</div></div>
        </div>
    </div>

    <div id="view-karaoke" class="full-screen hidden">
        <div class="room-header"><button class="back-btn" onclick="app.nav('dash')">‚¨ÖÔ∏è</button><div>KARAOKE</div><div style="width:40px"></div></div>
        <div class="room-content"><div style="font-size:4rem;">üé§</div><h2 id="song-name">Happy Birthday</h2><p id="lyrics">Happy Birthday to you...</p><button class="btn" onclick="karaoke.next()">N√ÑCHSTER SONG</button></div>
    </div>

    <div id="view-dancefloor" class="full-screen hidden">
        <div class="room-header"><button class="back-btn" onclick="app.nav('dash')">‚¨ÖÔ∏è</button><div>DANCEFLOOR</div><div style="width:40px"></div></div>
        <div class="room-content"><div class="dancefloor-grid">
            <div class="pad" onclick="dance.hit('kick')">ü•Å</div><div class="pad" onclick="dance.hit('snare')">üëè</div><div class="pad" onclick="dance.hit('hat')">üêç</div>
            <div class="pad" onclick="dance.hit('bass1')">üé∏</div><div class="pad" onclick="dance.hit('bass2')">üéª</div><div class="pad" onclick="dance.hit('laser')">üî´</div>
        </div></div>
    </div>

    <div id="view-bottle" class="full-screen hidden">
        <div class="room-header"><button class="back-btn" onclick="app.nav('dash')">‚¨ÖÔ∏è</button><div>FLASCHE</div><div style="width:40px"></div></div>
        <div class="room-content"><div id="bottle" class="bottle">üçæ</div><p id="bottle-res">Dreh mich!</p><button class="btn" onclick="bottle.spin()">DREHEN</button></div>
    </div>

    <script>
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        const ctx = new AudioContext();
        
        const intro = {
            vids: ['glitch1.mp4', 'glitch2.mp4', 'glitch3.mp4'], running: false,
            start: () => {
                document.getElementById('start-btn').style.display = 'none';
                document.getElementById('skip-btn').style.display = 'block';
                intro.running = true;
                const audio = document.getElementById('intro-music');
                audio.play(); if(ctx.state==='suspended') ctx.resume();
                const vid = document.getElementById('intro-vid-bg');
                let i=0; const pV = () => { if(!intro.running) return; vid.src=intro.vids[i]; vid.play(); i=(i+1)%intro.vids.length; };
                vid.onended = pV; pV(); intro.sequence();
            },
            log: (t, type) => {
                const c = document.getElementById('terminal-console');
                const d = document.createElement('div'); d.className = 'log-line ' + (type||''); d.innerText = "> " + t;
                c.appendChild(d); c.scrollTop = c.scrollHeight;
            },
            big: (t, g) => {
                const e = document.getElementById('big-overlay'); e.innerText = t; e.style.opacity = 1;
                if(g) e.className = 'glitch-anim'; setTimeout(() => { e.style.opacity = 0; }, 1500);
            },
            sequence: async () => {
                const s = ms => new Promise(r => setTimeout(r, ms));
                intro.log("BOOT SEQUENCE..."); await s(1000);
                intro.log("Kernel v9.0 loaded", "log-success"); await s(800);
                intro.big("CONNECTION OK"); await s(2000);
                intro.log("Firewall Bypass...", "log-error"); await s(1500);
                intro.big("HACKING...", true); await s(2500);
                intro.log("Access Granted!", "log-success"); await s(1000);
                intro.big("HAPPY BIRTHDAY REN√â"); await s(3000);
                intro.skip();
            },
            skip: () => { intro.running = false; document.getElementById('view-intro').classList.add('hidden'); document.getElementById('view-login').classList.remove('hidden'); }
        };

        const app = {
            user: '', scores: [],
            login: () => {
                const n = document.getElementById('username').value; if(!n) return;
                app.user = n; document.getElementById('display-name').innerText = n;
                app.nav('dash'); if(ctx.state==='suspended') ctx.resume();
            },
            nav: (v) => { document.querySelectorAll('.full-screen').forEach(e => e.classList.add('hidden')); document.getElementById('view-'+v).classList.remove('hidden'); }
        };

        const dance = {
            hit: (t) => {
                const o = ctx.createOscillator(), g = ctx.createGain(); o.connect(g); g.connect(ctx.destination);
                const n = ctx.currentTime;
                if(t==='kick'){ o.frequency.setValueAtTime(150, n); o.frequency.exponentialRampToValueAtTime(0.01, n+0.5); }
                else{ o.type='square'; o.frequency.value=800; }
                o.start(); o.stop(n+0.5);
            }
        };

        const bottle = {
            spin: () => {
                const el = document.getElementById('bottle'); el.style.transform = `rotate(${720+Math.random()*720}deg)`;
                setTimeout(() => { document.getElementById('bottle-res').innerText = "TRINK EINEN!"; }, 3000);
            }
        };

        const karaoke = {
            s: [{n:'Happy Birthday', l:'Happy Birthday to you...'}, {n:'Atemlos', l:'Atemlos durch die Nacht...'}], i:0,
            next: () => { karaoke.i=(karaoke.i+1)%karaoke.s.length; document.getElementById('song-name').innerText=karaoke.s[karaoke.i].n; document.getElementById('lyrics').innerText=karaoke.s[karaoke.i].l; }
        };
    </script>
</body>
</html>
